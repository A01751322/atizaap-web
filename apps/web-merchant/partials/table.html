<!-- ----------------------------- -->
<!-- Página de Incio para Negocios -->
<!-- ----------------------------- -->

<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/navbar.css">
        <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css" rel="stylesheet"/>
    </head>
    <body class="pt-14">
        <!-- Placeholder de navbar -->
        <div id="navbar-placeholder"></div>
        <!-- Script Placeholder de navbar y tokenización -->
            <script>
                document.addEventListener('DOMContentLoaded', async () => {
                const mount = document.getElementById('navbar-placeholder');
                try {
                    // cache-buster para evitar versiones viejas en escritorio
                    
                    const res = await fetch('../partials/navbar.html?v=' + Date.now());
                    if (!res.ok) throw new Error('HTTP ' + res.status);
                    const html = await res.text();
                    mount.innerHTML = html;

                    // Mover el contenido de la página dentro del recuadro con líneas
                    const content = document.getElementById('page-content');
                    let slot = mount.querySelector('#content-slot');

                    // Fallback: si el slot no existe, lo creamos dentro del primer recuadro punteado
                    if (!slot) {
                    const dashed = mount.querySelector('.border-dashed.rounded-lg');
                    if (dashed) {
                        slot = document.createElement('div');
                        slot.id = 'content-slot';
                        dashed.appendChild(slot);
                    }
                    }

                    if (slot && content) {
                    slot.appendChild(content);
                    } else {
                    console.warn('No se encontró content-slot ni contenido para mover');
                    }

                    // Re‑inicializa Flowbite para los elementos añadidos dinámicamente
                    if (window.initFlowbite) window.initFlowbite();
                } catch (err) {
                    console.error('Error al cargar la barra de navegación:', err);
                    mount.innerHTML = '<div class="fixed w-16 h-screen bg-gray-800 text-white p-4">Error al cargar</div>';
                }
                });
            </script>

            <!-- Contenido de Inicio -->
            <main id="page-content">
                
    <!-- Toolbar de exportación -->
    <div id="export-toolbar" class="mt-3 mb-3 w-full sm:w-auto">
    <button id="exportDropdownButton"
            data-dropdown-toggle="export-dropdown"
            type="button"
            class="w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-100 dark:text-white dark:bg-gray-800 dark:border-gray-600 dark:hover:bg-gray-700">
        Export as
        <svg class="w-3 h-3 ms-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/></svg>
    </button>

    <!-- Dropdown -->
    <div id="export-dropdown" class="z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
        <ul class="py-2 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="exportDropdownButton">
        <li><a href="#" data-export="csv"  class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">CSV</a></li>
        <li><a href="#" data-export="json" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">JSON</a></li>
        <li><a href="#" data-export="txt"  class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">TXT</a></li>
        <li><a href="#" data-export="sql"  class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">SQL</a></li>
        </ul>
    </div>
    </div>

    <table id="export-table">
        <thead>
            <tr>
                <th>
                    <span class="flex items-center">
                        Name
                        <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                        </svg>
                    </span>
                </th>
                <th data-type="date" data-format="YYYY/DD/MM">
                    <span class="flex items-center">
                        Release Date
                        <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                        </svg>
                    </span>
                </th>
                <th>
                    <span class="flex items-center">
                        NPM Downloads
                        <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                        </svg>
                    </span>
                </th>
                <th>
                    <span class="flex items-center">
                        Growth
                        <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                        </svg>
                    </span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Flowbite</td>
                <td>2021/25/09</td>
                <td>269000</td>
                <td>49%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">React</td>
                <td>2013/24/05</td>
                <td>4500000</td>
                <td>24%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Angular</td>
                <td>2010/20/09</td>
                <td>2800000</td>
                <td>17%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Vue</td>
                <td>2014/12/02</td>
                <td>3600000</td>
                <td>30%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Svelte</td>
                <td>2016/26/11</td>
                <td>1200000</td>
                <td>57%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Ember</td>
                <td>2011/08/12</td>
                <td>500000</td>
                <td>44%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Backbone</td>
                <td>2010/13/10</td>
                <td>300000</td>
                <td>9%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">jQuery</td>
                <td>2006/28/01</td>
                <td>6000000</td>
                <td>5%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Bootstrap</td>
                <td>2011/19/08</td>
                <td>1800000</td>
                <td>12%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Foundation</td>
                <td>2011/23/09</td>
                <td>700000</td>
                <td>8%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Bulma</td>
                <td>2016/24/10</td>
                <td>500000</td>
                <td>7%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Next.js</td>
                <td>2016/25/10</td>
                <td>2300000</td>
                <td>45%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Nuxt.js</td>
                <td>2016/16/10</td>
                <td>900000</td>
                <td>50%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Meteor</td>
                <td>2012/17/01</td>
                <td>1000000</td>
                <td>10%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Aurelia</td>
                <td>2015/08/07</td>
                <td>200000</td>
                <td>20%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Inferno</td>
                <td>2016/27/09</td>
                <td>100000</td>
                <td>35%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Preact</td>
                <td>2015/16/08</td>
                <td>600000</td>
                <td>28%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Lit</td>
                <td>2018/28/05</td>
                <td>400000</td>
                <td>60%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Alpine.js</td>
                <td>2019/02/11</td>
                <td>300000</td>
                <td>70%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Stimulus</td>
                <td>2018/06/03</td>
                <td>150000</td>
                <td>25%</td>
            </tr>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                <td class="font-medium text-gray-900 whitespace-nowrap dark:text-white">Solid</td>
                <td>2021/05/07</td>
                <td>250000</td>
                <td>80%</td>
            </tr>
        </tbody>
    </table>

    </main>
    </body>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@9.0.3" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const el = document.querySelector('#export-table');
        if (!el) return;

        // Inicializa el DataTable con los mismos controles que ves en el preview
        const dt = new simpleDatatables.DataTable(el, {
        searchable: true,   // activa el buscador
        sortable: true,     // activa ordenamiento por columna
        fixedHeight: true,  // header fijo al hacer scroll
        perPage: 10,        // filas por página
        perPageSelect: [10, 25, 50, 100] // selector "entries per page"
        });

        // (Opcional) Exportar: si agregas botones/menú, llama a estas funciones
        window.__exportTable = function (type) {
        if (!dt) return;
        if (type === 'csv')  return simpleDatatables.exportCSV(dt,  { download: true, filename: 'table' });
        if (type === 'json') return simpleDatatables.exportJSON(dt, { download: true, filename: 'table' });
        if (type === 'txt')  return simpleDatatables.exportTXT(dt,  { download: true, filename: 'table' });
        if (type === 'sql')  return simpleDatatables.exportSQL(dt,  { download: true, filename: 'table' });
        };

        // Inserta la toolbar de exportación en la franja superior del datatable
        const wrapper = el.closest('.dataTable-wrapper');
        const topbar  = wrapper ? wrapper.querySelector('.dataTable-top') : null;
        const toolbar = document.getElementById('export-toolbar');
        if (topbar && toolbar) {
        topbar.appendChild(toolbar);
        toolbar.classList.add('sm:ml-4','mt-3','sm:mt-0');
        }

        // Conecta las opciones del dropdown con las funciones de exportación
        document.querySelectorAll('#export-dropdown [data-export]').forEach(a => {
        a.addEventListener('click', (e) => {
            e.preventDefault();
            const type = a.getAttribute('data-export'); // csv | json | txt | sql
            if (window.__exportTable) window.__exportTable(type);
        });
        });

        // Asegura que Flowbite inicialice el dropdown (si ya está cargado)
        if (window.initFlowbite) window.initFlowbite();
    });
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
</html>